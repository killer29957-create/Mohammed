<!DOCTYPE html>  <html lang="ar">  
<head>  
<meta charset="UTF-8">  
<title>KiLLER SHOP</title>  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<style>  
html, body { margin:0; padding:0; font-family:Tahoma,Arial,sans-serif; direction:rtl; background:#111; color:#fff; display:flex; flex-direction:column; }  
header { background: rgba(0,0,0,0.85); padding:15px; display:flex; flex-direction:column; align-items:center; }  
.logo { font-size:24px; font-weight:bold; margin-bottom:10px; color:#fff; }  
.logo::after { content:''; display:block; width:100%; height:3px; background:#00f; margin-top:8px; }  
.nav-buttons { display:flex; flex-direction:column; gap:10px; align-items:center; }  
.nav-buttons.hidden { display:none !important; }  
.nav-buttons .top-buttons { display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }  
.nav-buttons button.logout-btn { width:150px; }  
button { padding:10px 18px; border:none; border-radius:8px; font-weight:bold; cursor:pointer; color:#fff; background:linear-gradient(45deg,#ff0000,#0000ff); box-shadow:0 0 5px #ff0000,0 0 5px #0000ff; transition: transform 0.2s, filter 0.2s, box-shadow 0.3s; }  
button:hover { transform: scale(1.05); filter:brightness(1.2); box-shadow:0 0 15px #ff0000,0 0 15px #0000ff; }  
button:active { transform: scale(0.98); box-shadow:0 0 10px #ff0000,0 0 10px #0000ff; }  
.page { display:none; flex:1; padding:20px; max-width:700px; width:100%; margin:20px auto; background:#222; border-radius:10px; overflow-y:auto; }  
input, select { width:100%; padding:10px; margin:6px 0; border-radius:6px; border:none; background:#333; color:#fff; box-sizing:border-box; }  
.small-note { color:#aaa; font-size:12px; }  
#notification { position: fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#0f0; color:#000; padding:10px 20px; border-radius:8px; display:none; font-weight:bold; z-index:9999; text-align:center; }  
.log-item { margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:5px; }  
.balance-box { background:#000; padding:10px; margin-bottom:10px; border-radius:10px; color:#0f0; font-weight:bold; text-align:center; }  
.method-box { background:#1a1a1a; padding:10px; border-radius:8px; margin:10px 0; display:flex; align-items:center; gap:8px; justify-content: space-between; flex-wrap:wrap; }  
.mono { font-family: Consolas, "Courier New", monospace; word-break: break-all; }  
.tag { display:inline-block; padding:2px 8px; background:#333; border-radius:999px; font-size:12px; color:#0ff; }  
.package-card { background:#333; border-radius:10px; padding:10px; margin:10px 0; display:flex; justify-content: space-between; align-items:center; flex-wrap: wrap; }  
.package-card div { margin:3px 0; }  
hr.sep { border:none; border-top:1px dashed #444; margin:10px 0; }  
</style>  
</head>  
<body>  
<div id="notification"></div>  
<header>  
<div class="logo">💰 KiLLER SHOP</div>  
<div class="nav-buttons hidden" id="navButtons">  
  <div class="top-buttons">  
    <button onclick="showPage('shopPage')">شحن</button>  
    <button onclick="showPage('depositPage')">إيداع</button>  
    <button onclick="showPage('adminPage')">قسم المدير</button>  
    <button onclick="showPage('logPage')">السجل</button>  
  </div>  
  <button class="logout-btn" onclick="logout()">تسجيل خروج</button>  
</div>  
</header>  <div class="page" id="loginPage">  
<h2>تسجيل الدخول</h2>  
<input type="email" id="email" placeholder="البريد الإلكتروني">  
<input type="password" id="password" placeholder="كلمة المرور">  
<button id="loginBtn">تسجيل الدخول</button>  
<p>لا تملك حساب؟ <a href="#" id="toSignup">إنشاء حساب</a></p>  
</div>  <div class="page" id="signupPage">  
<h2>إنشاء حساب</h2>  
<input type="text" id="signupName" placeholder="الاسم">  
<input type="email" id="signupEmail" placeholder="البريد الإلكتروني">  
<input type="password" id="signupPassword" placeholder="كلمة المرور">  
<button id="signupBtn">تسجيل</button>  
<p>لديك حساب؟ <a href="#" id="toLogin">تسجيل الدخول</a></p>  
</div>  <div class="page" id="depositPage">  
<h2>إيداع رصيد</h2>  
<label>طريقة الدفع</label>  
<select id="paymentMethod" onchange="updatePaymentMethod()">  
  <option value="seriyatel-cash">سيرياتيل كاش</option>  
  <option value="usdt-bep20">USDT-BEP20</option>  
</select>  <div id="seriyatelCashBox" class="method-box">  
  <div>  
    <div class="tag">Syriatel Cash</div>  
    <div>الرقم: <span id="cashNumber" class="mono">96617866</span></div>  
  </div>  
  <button onclick="copyCash()">نسخ الرقم</button>  
</div>  <div id="usdtBox" class="method-box hidden">  
  <div>  
    <div class="tag">USDT • BEP20</div>  
    <div>المحفظة: <span id="walletAddress" class="mono">0xa38ce6cefd1d0f7160c71a52ae133d84c1982bbc</span></div>  
  </div>  
  <button onclick="copyAddress()">نسخ العنوان</button>  
</div>  <hr class="sep">  <form id="depositForm">  
<input type="number" id="amount" placeholder="أدخل المبلغ $" step="0.01" min="0">  
<input type="text" id="depositorID" placeholder="ID اللاعب">  
<label>رفع إيصال:</label>  
<input type="file" id="receiptFile" accept="image/*">  
<button type="submit">إرسال طلب إيداع</button>  
</form>  
</div>  <div class="page" id="adminPage">  
<h2>⚙️ قسم المدير</h2>  
<div class="small-note">هذا القسم يظهر فقط لإيميل المدير: killer29957@gmail.com</div>  <h3>طلبات الشحن والإيداع المعلقة</h3>  
<div id="pendingOrders"></div>  <h3>تعديل أسعار الباقات</h3>  
<div id="packagesEdit"></div>  <h3>⚡ إعدادات الدولار والكاش</h3>  
<div id="currencySettings" class="method-box">  
  <div>سعر 1$ مقابل سيرياتيل كاش:</div>  
  <input type="number" id="dollarRate" value="11500" style="width:120px">  
  <button onclick="saveDollarRate()">حفظ</button>  
</div>  
</div>  <div class="page" id="logPage">  
<div class="balance-box">رصيدي الحالي: <span id="balance"></span></div>  
<h2>سجل العمليات</h2>  
<div id="log"></div>  
</div>  <div class="page" id="shopPage">  
<h2>شراء جواهر وعضويات Free Fire</h2>  
<div id="packagesContainer"></div>  
</div>  <script>  
// ===== البيانات =====  
let users = JSON.parse(localStorage.getItem('users')) || {};  
let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;  
let pendingOrders = JSON.parse(localStorage.getItem('pendingOrders')) || [];  
let settings = JSON.parse(localStorage.getItem('settings')) || {  
    packages:[{name:'100 جوهرة', price:1},{name:'200 جوهرة', price:2},{name:'300 جوهرة', price:3},{name:'عضوية أسبوعية', price:2.2},{name:'عضوية شهرية', price:10.9}],  
    dollarRate:11600  
};  
  
// ===== إشعارات تيليجرام =====  
function sendTelegramNotification(message,file){  
    const TOKEN="8435662156:AAFutgRbz-whwCWVqOHvSjQElyRyknsvNdk";  
    const CHAT_ID="8241236521";  
    if(file){  
        let formData=new FormData();  
        formData.append("chat_id",CHAT_ID);  
        formData.append("photo",file);  
        formData.append("caption",message);  
        fetch(`https://api.telegram.org/bot${TOKEN}/sendPhoto`,{method:"POST",body:formData});  
    }else{  
        fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`);  
    }  
}  
  
// ===== إشعارات =====  
function showNotification(msg){  
    let n=document.getElementById('notification');  
    n.innerText=msg; n.style.display='block';  
    setTimeout(()=>{n.style.display='none';},2000);  
}  
  
// ===== التنقل =====  
function showPage(id){  
    document.querySelectorAll('.page').forEach(p=>p.style.display='none');  
    if(id==='adminPage' && (!currentUser || currentUser.email!=='killer29957@gmail.com')) return;  
    document.getElementById(id).style.display='block';  
    renderPackages(); renderPackagesEdit(); renderLog(); renderPending(); updateBalance();  
}  
  
function logout(){ currentUser=null; localStorage.removeItem('currentUser'); document.getElementById('navButtons').classList.add('hidden'); showPage('loginPage'); }  
function copyCash(){ navigator.clipboard.writeText(document.getElementById('cashNumber').innerText); showNotification('تم النسخ'); }  
function copyAddress(){ navigator.clipboard.writeText(document.getElementById('walletAddress').innerText); showNotification('تم النسخ'); }  
function updatePaymentMethod(){ let m=document.getElementById('paymentMethod').value; document.getElementById('seriyatelCashBox').classList.toggle('hidden', m!=='seriyatel-cash'); document.getElementById('usdtBox').classList.toggle('hidden', m!=='usdt-bep20'); }  
  
// ===== الباقات =====  
function renderPackages(){  
    let container=document.getElementById('packagesContainer'); container.innerHTML='';  
    settings.packages.forEach((p,i)=>{  
        let cashAmount=p.price*settings.dollarRate;  
        let div=document.createElement('div');  
        div.className='package-card';  
        div.innerHTML=`<div>${p.name}</div><div>$${p.price} = ${cashAmount.toLocaleString()} سيرياتيل كاش</div><button onclick="buyPackage(${i})">شراء</button>`;  
        container.appendChild(div);  
    });  
}  
  
function buyPackage(i){  
    if(!currentUser){showNotification('سجل الدخول أولاً'); return;}  
    let p=settings.packages[i];  
    let userBalance=users[currentUser.email].balance||0;  
    if(userBalance<p.price){showNotification(`رصيدك غير كافٍ! رصيدك الحالي ${userBalance} $`); return;}  
    let playerID=prompt("أدخل ID اللاعب"); if(!playerID){showNotification('ID اللاعب مطلوب'); return;}  
    users[currentUser.email].balance-=p.price;  
    if(!users[currentUser.email].log) users[currentUser.email].log=[];  
    users[currentUser.email].log.push({date:new Date().toLocaleString(), type:'شراء', amount:p.price, details:`${p.name} - ID ${playerID}`});  
    localStorage.setItem('users',JSON.stringify(users));  
    pendingOrders.push({type:'شراء', user:currentUser.email, amount:p.price, details:`${p.name} - ID ${playerID}`});  
    localStorage.setItem('pendingOrders',JSON.stringify(pendingOrders));  
    renderPending(); renderLog(); updateBalance(); showNotification('تم إرسال الطلب للموافقة');  
    sendTelegramNotification(`طلب شراء جديد:\nالمستخدم: ${currentUser.name} (${currentUser.email})\nالباقة: ${p.name}\nالمبلغ: ${p.price} $\nID اللاعب: ${playerID}`);  
}  
  
// ===== تسجيل وإيداع =====  
document.getElementById('signupBtn').addEventListener('click',()=>{  
    let name=document.getElementById('signupName').value.trim();  
    let email=document.getElementById('signupEmail').value.trim();  
    let pass=document.getElementById('signupPassword').value.trim();  
    if(!name||!email||!pass){showNotification('أدخل جميع الحقول'); return;}  
    if(users[email]){showNotification('البريد مستخدم بالفعل'); return;}  
    users[email]={name:name,password:pass,balance:0,log:[]};  
    localStorage.setItem('users',JSON.stringify(users));  
    showNotification('تم إنشاء الحساب'); showPage('loginPage');  
});  
  
document.getElementById('loginBtn').addEventListener('click',()=>{  
    let email=document.getElementById('email').value.trim();  
    let pass=document.getElementById('password').value.trim();  
    if(!email||!pass){showNotification('أدخل جميع الحقول'); return;}  
    if(!users[email] || users[email].password!==pass){showNotification('البريد أو كلمة المرور خاطئة'); return;}  
    currentUser={email:email, name:users[email].name};  
    localStorage.setItem('currentUser',JSON.stringify(currentUser));  
    document.getElementById('navButtons').classList.remove('hidden');  
    showPage('shopPage'); showNotification('تم تسجيل الدخول');  
});  
  
document.getElementById('toSignup').addEventListener('click',(e)=>{e.preventDefault(); showPage('signupPage');});  
document.getElementById('toLogin').addEventListener('click',(e)=>{e.preventDefault(); showPage('loginPage');});  
  
document.getElementById('depositForm').addEventListener('submit',(e)=>{  
    e.preventDefault();  
    if(!currentUser){showNotification('سجل الدخول أولاً'); return;}  
    let amount=parseFloat(document.getElementById('amount').value);  
    let playerID=document.getElementById('depositorID').value.trim();  
    let file=document.getElementById('receiptFile').files[0];  
    if(isNaN(amount)||!playerID||!file){showNotification('أدخل جميع الحقول بشكل صحيح واختر الصورة'); return;}  
    pendingOrders.push({type:'إيداع', user:currentUser.email, amount:amount, details:`ID ${playerID}`, file:file.name});  
    localStorage.setItem('pendingOrders',JSON.stringify(pendingOrders));  
    renderPending(); showNotification('تم إرسال طلب الإيداع');  
    sendTelegramNotification(`طلب إيداع جديد:\nالمستخدم: ${currentUser.name} (${currentUser.email})\nالمبلغ: ${amount} $\nID اللاعب: ${playerID}`,file);  
});  
  
// ===== المدير =====  
function renderPackagesEdit(){if(!currentUser || currentUser.email!=='killer29957@gmail.com') return;  
let c=document.getElementById('packagesEdit'); c.innerHTML='';  
settings.packages.forEach((p,i)=>{  
let div=document.createElement('div'); div.className='method-box'; div.style.justifyContent='flex-start';  
div.innerHTML=`<div style="min-width:180px">${p.name}</div><div>$<input type="number" value="${p.price}" id="pkg_${i}" style="width:90px"></div><button onclick="savePackage(${i})">حفظ</button>`;  
c.appendChild(div);});  
}  
  
function savePackage(i){let val=parseFloat(document.getElementById(`pkg_${i}`).value); if(isNaN(val)) return;  
settings.packages[i].price=val; localStorage.setItem('settings',JSON.stringify(settings)); renderPackages(); renderPackagesEdit(); showNotification(`تم تعديل ${settings.packages[i].name} إلى $${val}`);}  
function saveDollarRate(){let val=parseFloat(document.getElementById('dollarRate').value); if(isNaN(val)||val<=0){showNotification('أدخل قيمة صحيحة'); return;}  
settings.dollarRate=val; localStorage.setItem('settings',JSON.stringify(settings)); renderPackages(); showNotification(`تم تعديل سعر الدولار إلى ${val} سيرياتيل كاش`);}  
  
function renderPending(){if(!currentUser || currentUser.email!=='killer29957@gmail.com') return;  
let div=document.getElementById('pendingOrders'); div.innerHTML='';  
pendingOrders.forEach((o,i)=>{  
let d=document.createElement('div'); d.className='method-box'; d.style.justifyContent='space-between';  
d.innerHTML=`${o.type} - ${o.user} - ${o.amount||''} $ (${o.details}) <div><button onclick="approveOrder(${i})">موافقة</button> <button onclick="rejectOrder(${i})">رفض</button></div>`;  
div.appendChild(d);});  
}  
  
function approveOrder(i){let o=pendingOrders[i]; if(!users[o.user].balance) users[o.user].balance=0;  
if(o.type==='إيداع') users[o.user].balance+=o.amount;  
if(!users[o.user].log) users[o.user].log=[];  
users[o.user].log.push({date:new Date().toLocaleString(), type:o.type, amount:o.amount||0, details:o.details});  
localStorage.setItem('users',JSON.stringify(users)); pendingOrders.splice(i,1); localStorage.setItem('pendingOrders',JSON.stringify(pendingOrders));  
renderPending(); renderLog(); updateBalance(); showNotification('تمت الموافقة');// إشعار موافقة الإيداع أو الشحن  
sendTelegramNotification(`تمت الموافقة على الطلب:\nالمستخدم: ${o.user}\nنوع: ${o.type}\nالمبلغ: ${o.amount||''} $\nالتفاصيل: ${o.details}`);  
  
// إذا كان هناك صورة مرفقة للإيداع، أرسلها للبوت  
if(o.type==='إيداع' && o.file){  
    // نرسل الصورة باسم الملف فقط، لأنها مخزنة محليًا  
    sendTelegramNotification(`تمت الموافقة على الإيداع للصورة: ${o.file}`, null);  
}  
  
}  
  
function rejectOrder(i){  
let o=pendingOrders[i];  
pendingOrders.splice(i,1);  
localStorage.setItem('pendingOrders',JSON.stringify(pendingOrders));  
renderPending(); showNotification('تم الرفض');  
  
// إشعار البوت بالرفض  
sendTelegramNotification(`تم رفض الطلب:\nالمستخدم: ${o.user}\nنوع: ${o.type}\nالمبلغ: ${o.amount||''} $\nالتفاصيل: ${o.details}`);  
}  
  
// ===== سجل العمليات والرصيد =====  
function renderLog(){  
if(!currentUser) return;  
let logDiv=document.getElementById('log'); logDiv.innerHTML='';  
let logs=users[currentUser.email].log||[];  
logs.forEach(l=>{  
    let d=document.createElement('div');  
    d.className='log-item';  
    d.textContent=`${l.date} - ${l.type}: ${l.amount||''} $ (${l.details})`;  
    logDiv.appendChild(d);  
});  
updateBalance();  
}  
  
function updateBalance(){  
if(currentUser){  
    let b=users[currentUser.email].balance||0;  
    document.getElementById('balance').innerText=`${b} $`;  
}  
}  
  
// ===== عند تحميل الصفحة =====  
document.addEventListener('DOMContentLoaded',()=>{  
if(currentUser){  
    document.getElementById('navButtons').classList.remove('hidden');  
    showPage('shopPage');  
}else showPage('loginPage');  
});  
  
document.getElementById('paymentMethod').addEventListener('change',updatePaymentMethod);  
</script>  </body>  
  </html>
